#ifndef INPUT_H
#define INPUT_H

#include <SDL.h>

//------------------------------------------------------------------------------
//------------------------------------------------------------------------------
class Input
{
  public:
    //--------------------------------------------------------------------------
    //  The key presses are stored in a bit string. Thus this enumeration
    //  specifies values in powers of two.
    //--------------------------------------------------------------------------
    enum Code
    {
        QUIT   = 1,
        START  = 2,
        PAUSE  = 4,
        CHEAT  = 8,
        WINDOW = 16,
        AUDIO  = 32,
        LEVEL  = 64,
        SLASH1 = 2048,
        SLASH2 = 4096,
        SLASH3 = 8192,
        SLASH4 = 16384,
        BACK1  = 32768,
        BACK2  = 65536,
        BACK3  = 131072,
        BACK4  = 262144
    };

    Input();
    ~Input();

    //--------------------------------------------------------------------------
    //  Poll the keyboard and set bits in the bitmap appropriately.
    //--------------------------------------------------------------------------
    void clearSymbol();

    void poll();

    SDLKey getSymbol() const;

    SDLMod getModifier() const;

    //--------------------------------------------------------------------------
    //--------------------------------------------------------------------------
    bool key(Code code);

    //--------------------------------------------------------------------------
    //--------------------------------------------------------------------------
    void clear(void);

  private:
    //--------------------------------------------------------------------------
    //--------------------------------------------------------------------------
    void _bit(SDL_Event* e, Code code);

    unsigned long _keymap;
    SDLKey        _symbol;
    SDLMod        _modifier;
};

#endif
