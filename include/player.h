#ifndef PLAYER_H
#define PLAYER_H

#include <input.h>
#include <font.h>
#include <grid.h>
#include <trail.h>
#include <audio.h>

#include <SDL.h>

//------------------------------------------------------------------------------
//------------------------------------------------------------------------------
class Player
{
  public:
    Player();
    ~Player();

    //--------------------------------------------------------------------------
    //--------------------------------------------------------------------------
    void init(int type);

    //--------------------------------------------------------------------------
    //--------------------------------------------------------------------------
    void update(Input& input, Grid<Uint8>& symbol, Font& font, Audio* audio);

    //--------------------------------------------------------------------------
    //--------------------------------------------------------------------------
    void draw(Grid<Photon>& grid);

    //--------------------------------------------------------------------------
    //--------------------------------------------------------------------------
    bool active();

    //--------------------------------------------------------------------------
    //--------------------------------------------------------------------------
    Uint8 getX();

    //--------------------------------------------------------------------------
    //--------------------------------------------------------------------------
    Uint8 getY();

    //--------------------------------------------------------------------------
    //--------------------------------------------------------------------------
    int getScore();

    int getTotal();

    void clearScore(bool speed);

    //--------------------------------------------------------------------------
    //--------------------------------------------------------------------------
    void incScore();

    void addScore(int amount);

    //--------------------------------------------------------------------------
    //--------------------------------------------------------------------------
    Uint32 getColour(SDL_Surface* surface);

  private:
    //--------------------------------------------------------------------------
    //--------------------------------------------------------------------------
    bool _slash(Grid<Uint8>& symbol, Font& font);

    //--------------------------------------------------------------------------
    //--------------------------------------------------------------------------
    bool _back(Grid<Uint8>& symbol, Font& font);

    //--------------------------------------------------------------------------
    //--------------------------------------------------------------------------
    void _turn(Grid<Uint8>& symbol, Font& font, Audio* audio);

    //--------------------------------------------------------------------------
    //--------------------------------------------------------------------------
    void _getHeading(int& dx, int& dy);

    Trail       _trail;
    int         _score;
    int         _total;
    bool        _refresh;
    bool        _turned;
    bool        _speed;
    int         _x;
    int         _y;
    Input::Code _slash_key;
    Input::Code _back_key;
    Input::Code _buffer;
};

#endif
